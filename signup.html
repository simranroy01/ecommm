<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="styles.css"> <!-- Optional: Include your CSS file -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="config.js"></script> <!-- Include your config.js file -->
    <script src="cognito.js"></script> <!-- Include your cognito.js file -->
</head>
<body>
    <div class="container">
        <h2>Sign Up</h2>
        <form id="registrationForm" onsubmit="event.preventDefault(); signup();">
            <div>
                <label for="emailInputRegister">Email:</label>
                <input type="email" id="emailInputRegister" required>
            </div>
            <div>
                <label for="passwordInputRegister">Password:</label>
                <input type="password" id="passwordInputRegister" required>
            </div>
            <div>
                <label for="password2InputRegister">Confirm Password:</label>
                <input type="password" id="password2InputRegister" required>
            </div>
            <button type="submit">Sign Up</button>
        </form>
        <p>Already have an account? <a href="login.html">Log in here</a></p>
    </div>

    <!-- Load the Webpack bundle.js, which includes AWS Cognito and your signup logic -->
    <script src="dist/bundle.js"></script> <!-- Assuming Webpack outputs to /dist -->

    <script>
        function signup() {
            const email = document.getElementById('emailInputRegister').value;
            const password = document.getElementById('passwordInputRegister').value;
            const confirmPassword = document.getElementById('password2InputRegister').value;

            if (password !== confirmPassword) {
                alert("Passwords do not match.");
                return;
            }

            // Call your signup logic here
            const poolData = {
                UserPoolId: _config.cognito.userPoolId,
                ClientId: _config.cognito.userPoolClientId,
            };

            const userPool = new AWSCognito.CognitoIdentityServiceProvider.CognitoUserPool(poolData);
            const attributeList = [];
            const dataEmail = {
                Name: 'email',
                Value: email
            };

            const attributeEmail = new AWSCognito.CognitoIdentityServiceProvider.CognitoUserAttribute(dataEmail);
            attributeList.push(attributeEmail);

            userPool.signUp(email, password, attributeList, null, function(err, result) {
                if (err) {
                    alert(err.message || JSON.stringify(err));
                    return;
                }
                alert("Sign up successful! Please check your email for a confirmation code.");
                // Redirect to verification page (optional)
                window.location.href = "verify.html"; // Update this if you have a verification page
            });
        }
    </script>
</body>
</html>


